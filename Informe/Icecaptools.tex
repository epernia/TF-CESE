\section{IDE Icecaptools} \label{sec:icecaptools}

%http://www.icelab.dk/ <--- HVM

%http://people.cs.aau.dk/~luckow/hvmtp/ <--- HVM-TP

% BIBLIOGRAFIA
%Luckow, K. S., Thomsen, B., & Korsholm, S. E. (2014). HVMTP: A time predictable and portable java virtual machine for hard real-time embedded systems. In Proceedings of the 12th International Workshop on Java Technologies for Real-Time and Embedded Systems. (pp. 107-116). Association for Computing Machinery. (International Workshop of Java Technologies for Real-Time and Embedded Systems. Proceedings). 10.1145/2661020.2661022
% LINK: http://vbn.aau.dk/en/publications/hvmtp%2864e244eb-9de1-4a1f-962a-9c66ffa2a249%29.html


Icecaptools se distribuye como un plugin de Eclipse realizado por Stephan Erbs Korsholm, que convierte al Eclipse en un IDE para la programación en lenguaje Java y permite compilar el programa de usuario para HVM. Funciona realizando una traducción de un programa de usuario escrito en lenguaje Java, a un programa en lenguaje C que incluye el código de dicho programa y el código C generado de HVM. De esta manera, logra portabilidad entre diferentes microcontroladores y permite integración con programas escritos previamente en lenguaje C, como por ejemplo, el firmware de la CIAA. Requiere un toolchain de lenguaje C, para el microcontrolador objetivo, que permita compilar el código, generando un binario ejecutable, y su posterior descarga a dicho dispositivo. En la figura [\ref{fig:Icecaptools}] se incluye un esquema gráfico de su funcionamiento.

\begin{figure}[!htbp]
\begin{center}
\includegraphics*[width=12cm,height=12cm]{figuras/Icecaptools.png}
\par\caption{Esquema de funcionamiento de Icecaptools.}\label{fig:Icecaptools}
\end{center}
\end{figure}


HVM provee tres formas de acceso al hardware:

\begin{itemize}
\item 
\textbf{Variables Bindeadas.} Es una variable que puedo utilizar en lenguaje Java y tiene correspondencia directa con una variable en otro lenguaje (en este caso particular, lenguaje C).
\item 
\textbf{\textit{Hardware Objects}.} Es una abstracción que permite acceder a registros del microcontrolador mapeados en memoria para manipularlos desde el programa en lenguaje Java. De esta forma se puede crear una biblioteca completa dependiente del microcontrolador que maneje un periférico a nivel de registros directamente en Java.
\item 
\textbf{Métodos nativos.} Esta alternativa permite utilizar funciones realizadas en otro lenguaje como métodos en lenguaje Java. De esta manera permite ejecutar código \textit{legacy} dando la posibilidad de utilizar bibliotecas completas realizadas en otro lenguaje. Para conectar un método con una función en lenguaje C, deben respetarse ciertan convenciones de nombres y de pasajes de parámetros en las funciones realizadas para que el compilador de Java puede asociarlas.
\end{itemize}

Se elije métodos nativos como alternativa para proveer al programa de usuario en lenguaje Java el acceso a los periféricos del microcontrolador. Esto es porque ya existen bibliotecas completas de manejo de periféricos y además \textit{stacks} y \textit{file systems} entre otras.
